var hive_loader = require('hive-loader');
var layouts_loader = require('loaders/layouts_loader')
var _DEBUG = 1;


module.exports = function(apiary){
	var _mixins = {
		name:    'layouts_handler',
		respond: function (params) {
			if (_DEBUG) console.log('layouts_handler: found dir (layouts) %s', params.file_path);
			var ll = layouts_loader(params.file_path, apiary);
			ll.load(params.gate.latch());
		}
	};
	return hive_loader.handler(_mixins, {dir: true, name_filter: /layout(s)?/i});
}